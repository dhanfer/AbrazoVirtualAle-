<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Abrazo virtual</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      background-color: whitesmoke;
      font-family: 'Comic Neue', cursive;
    }

    :root {
      --loading-width: 160px;
      --loading-heigth: 23px;
    }

    body {
      width: 100vw;
      height: 100vh;
      position: absolute;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    main {
      text-align: center;
      width: 90vw;
    }

    .box {
      display: inline-block;
      border: solid black 4px;
      width: var(--loading-width);
      background-color: white;
      margin-top: 3px;
    }

    .loading-box {
      height: var(--loading-heigth);
      width: var(--loading-width);
      background-color: blueviolet;
      animation: loading 5s;
    }

    #state-message {
      font-size: larger;
      font-weight: bold;
      color: rgb(109, 109, 109);
    }

    @keyframes loading {
      0% {
        width: 0;
      }

      100% {
        width: var(--loading-width);
      }
    }

    #title,
    #result {
      margin-top: 8px;
      margin-bottom: 10px;
    }

    #me {
      margin-top: 8px;
      margin-bottom: 14px;
    }

    /* Botón de reproducción */
    #playButton {
      margin-top: 16px;
      padding: 10px 20px;
      background-color: #ff6ea6;
      border: none;
      border-radius: 30px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    #playButton:hover {
      background-color: #e05293;
    }
  </style>
</head>

<body>
  <main>
    <h1 id="title">Enviando abrazo virtual</h1>
    <div>
      <img id="me" src="penguin.svg" alt="Pingüino" />
    </div>
    <div class="box">
      <div class="loading-box"></div>
    </div>
    <h3 id="state-message">cargando...</h3>
    <h2 id="result">&nbsp;</h2>

    <!-- Botón para activar audio -->
    <button id="playButton">💖 Toca para escuchar</button>
  </main>

  <!-- Audio oculto -->
  <audio id="music" src="./audio/Jay Wheeler - Me Enamoré (Cover Audio).mp3" preload="auto" muted autoplay loop></audio>

  <script>
    // Mensajes
    setTimeout(() => {
      document.getElementById('result').innerHTML = "Abrazo enviado!";
    }, 6200);

    setTimeout(() => {
      document.getElementById('state-message').innerHTML = "&nbsp;";
    }, 6000);

    setTimeout(() => {
      const extraMessage = document.createElement('p');
      extraMessage.innerHTML = "Te extraño Alexandra, necesito de ti ❤️";
      extraMessage.style.marginTop = "12px";
      extraMessage.style.fontSize = "18px";
      extraMessage.style.color = "rgb(130, 80, 130)";
      document.querySelector("main").appendChild(extraMessage);
    }, 7500);

    // Audio
    window.addEventListener("DOMContentLoaded", () => {
      const audio = document.getElementById("music");
      const playButton = document.getElementById("playButton");

      // Empieza en silencio desde el segundo 11
      audio.currentTime = 11;
      audio.muted = true;
      audio.play().catch(err => console.warn("Autoplay bloqueado:", err));

      // Al hacer clic en el botón, activa el audio
      playButton.addEventListener("click", () => {
        audio.muted = false;
        audio.play();
        playButton.disabled = true;
        playButton.textContent = "🎶 Reproduciendo...";
        playButton.style.backgroundColor = "#aaa";
        playButton.style.cursor = "default";
      });
    });
  </script>
</body>

</html>
